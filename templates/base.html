<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}LTIP{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        // Paleta estrita do usuário: Azul Claro, Azul Escuro, Verde Claro, Verde Escuro, Branco, Preto
                        'primary': '#1e40af', // Azul Escuro (Para Botões principais, títulos, links)
                        'ltip-light-blue': '#60a5fa', // Azul Claro (Para fundos de destaque)
                        'ltip-dark-green': '#065f46', // Verde Escuro (Para ações secundárias/sucesso)
                        'ltip-light-green': '#6ee7b7', // Verde Claro (Para fundos de sucesso/info)
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Define a fonte Inter */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        
        /* CORREÇÃO DA ROLAGEM E CORES BASE */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f7ff; /* Fundo em Azul Claro */
            color: black; /* Texto preto */
            min-height: 100vh;
            overflow-y: auto;
        }

        /* CORREÇÃO DE CONTRASTE: Garante texto branco em fundos Azul Escuro (primary) */
        /* Isso corrige o problema de "letras azul claro com fundo azul escuro"  */
        .bg-primary .text-ltip-light-blue,
        .bg-primary .text-primary {
            color: white !important;
        }
        
        /* Ajuste de padding para compensar o cabeçalho fixo (height ajustado para 104px (6.5rem) em mobile) */
        .main-content-wrapper {
            padding-top: 5rem; /* pt-20 = 5rem. Valor padrão para desktop */
            min-height: calc(100vh - 4rem);
        }
        
        /* Ajuste para mobile, se o nav-bar aumentar de tamanho */
        @media (max-width: 639px) { /* sm breakpoint */
             .main-content-wrapper {
                padding-top: 8rem; /* Aumenta o padding para 8rem em mobile */
            }
        }

        /* Estilo para links de tabulação (usado no gerenciamento) */
        .tab-link.active {
            border-color: #1e40af; /* Azul Escuro */
            color: #1e40af;
            font-weight: 600;
        }

        /* Classes utilitárias Tailwind remapeadas */
        .bg-primary { background-color: #1e40af; } 
        .text-primary { color: #1e40af; }
    </style>
</head>
<body>

    <nav class="bg-white shadow-lg fixed w-full z-10 border-b border-ltip-light-blue">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col sm:flex-row sm:justify-between sm:h-16 py-3 sm:py-0">
                <div class="flex items-center justify-center sm:justify-start mb-2 sm:mb-0">
                    <a href="{{ url_for('index') }}" class="flex-shrink-0 flex items-center">
                        <div class="text-2xl font-extrabold text-primary">LTIP</div>
                    </a>
                </div>
                
                <div class="hidden sm:ml-6 sm:flex sm:space-x-8 items-center">
                    <a href="{{ url_for('index') }}" class="text-gray-700 hover:text-primary transition duration-150 {% if request.path == url_for('index') %}text-primary font-semibold{% endif %}">Início</a>
                    <a href="{{ url_for('inventario') }}" class="text-gray-700 hover:text-primary transition duration-150 {% if request.path == url_for('inventario') %}text-primary font-semibold{% endif %}">Inventário</a>
                    
                    {% if current_user.is_authenticated %}
                        <a href="{{ url_for('gerenciamento') }}" class="text-gray-700 hover:text-primary transition duration-150 {% if request.path == url_for('gerenciamento') %}text-primary font-semibold{% endif %}">Gerenciamento</a>
                        {% if current_user.role in ['admin', 'coordenador'] %}
                            <a href="{{ url_for('relatorios') }}" class="text-gray-700 hover:text-primary transition duration-150 {% if request.path == url_for('relatorios') %}text-primary font-semibold{% endif %}">Relatórios</a>
                        {% endif %}
                        <a href="{{ url_for('logout') }}" class="bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded-full transition duration-150">Sair</a>
                    {% else %}
                        <a href="{{ url_for('login') }}" class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-full transition duration-150">Login</a>
                    {% endif %}
                </div>

                <div class="-mr-2 flex items-center sm:hidden">
                    <button id="mobile-menu-button" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Abrir menu principal</span>
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div class="sm:hidden hidden" id="mobile-menu">
            <div class="pt-2 pb-3 space-y-1">
                <a href="{{ url_for('index') }}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-primary {% if request.path == url_for('index') %}bg-gray-100 text-primary font-semibold{% endif %}">Início</a>
                <a href="{{ url_for('inventario') }}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-primary {% if request.path == url_for('inventario') %}bg-gray-100 text-primary font-semibold{% endif %}">Inventário</a>
                
                {% if current_user.is_authenticated %}
                    <a href="{{ url_for('gerenciamento') }}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-primary {% if request.path == url_for('gerenciamento') %}bg-gray-100 text-primary font-semibold{% endif %}">Gerenciamento</a>
                    {% if current_user.role in ['admin', 'coordenador'] %}
                        <a href="{{ url_for('relatorios') }}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-primary {% if request.path == url_for('relatorios') %}bg-gray-100 text-primary font-semibold{% endif %}">Relatórios</a>
                    {% endif %}
                    <a href="{{ url_for('logout') }}" class="block w-full text-center mt-2 bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded-full transition duration-150">Sair</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="block w-full text-center mt-2 bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-full transition duration-150">Login</a>
                {% endif %}
            </div>
        </div>
    </nav>
    
    <div class="main-content-wrapper max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <div class="mt-4">
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            <div class="space-y-3">
                {% for category, message in messages %}
                    {% if category == 'success' %}
                        <div class="bg-ltip-light-green/50 border border-ltip-dark-green text-ltip-dark-green px-4 py-3 rounded-xl relative shadow-md" role="alert">
                            <span class="block sm:inline">{{ message }}</span>
                        </div>
                    {% elif category == 'error' %}
                        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-xl relative shadow-md" role="alert">
                            <span class="block sm:inline">{{ message }}</span>
                        </div>
                    {% else %}
                        <div class="bg-ltip-light-blue/50 border border-primary text-primary px-4 py-3 rounded-xl relative shadow-md" role="alert">
                            <span class="block sm:inline">{{ message }}</span>
                        </div>
                    {% endif %}
                {% endfor %}
                </div>
            {% endif %}
            {% endwith %}
        </div>
    
        <main class="py-6">
            {% block content %}{% endblock %}
        </main>
    
        <footer class="mt-12 py-4 border-t border-gray-200 text-center text-gray-500 text-sm">
            &copy; {{ datetime.now().year }} LTIP. Todos os direitos reservados. Criado por Arthur, o Bolsista.
        </footer>
    </div>
</body>
</html>
