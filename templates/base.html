<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}LTIP{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        // Paleta estrita do usuário: Azul Claro, Azul Escuro, Verde Claro, Verde Escuro, Branco, Preto
                        'primary': '#1e40af', // Azul Escuro (Para Botões principais, títulos, links)
                        'ltip-light-blue': '#60a5fa', // Azul Claro (Para fundos de destaque)
                        'ltip-dark-green': '#065f46', // Verde Escuro (Para ações secundárias/sucesso)
                        'ltip-light-green': '#6ee7b7', // Verde Claro (Para fundos de sucesso/info)
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Define a fonte Inter */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        
        /* CORREÇÃO DA ROLAGEM E CORES BASE */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f7ff; /* Fundo em Azul Claro */
            color: black; /* Texto preto */
            min-height: 100vh;
            overflow-y: auto;
        }
        
        /* Ajuste de padding para compensar o cabeçalho fixo (height ajustado para 104px (6.5rem) em mobile) */
        .main-content-wrapper {
            padding-top: 5rem; /* pt-20 = 5rem. Valor padrão para desktop */
            min-height: calc(100vh - 4rem);
        }
        
        /* Ajuste para mobile, se o nav-bar aumentar de tamanho */
        @media (max-width: 639px) { /* sm breakpoint */
             .main-content-wrapper {
                padding-top: 8rem; /* Aumenta o padding para 8rem em mobile */
            }
        }

        /* Estilo para links de tabulação (usado no gerenciamento) */
        .tab-link.active {
            border-color: #1e40af; /* Azul Escuro */
            color: #1e40af;
            font-weight: 600;
        }

        /* Classes utilitárias Tailwind remapeadas */
        .bg-primary { background-color: #1e40af; } 
        .text-primary { color: #1e40af; }
    </style>
</head>
<body>

    <nav class="bg-white shadow-lg fixed w-full z-10 border-b border-ltip-light-blue">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col sm:flex-row sm:justify-between sm:h-16 py-3 sm:py-0">
                
                <div class="flex items-center justify-center sm:justify-start mb-2 sm:mb-0">
                    <a href="{{ url_for('index') }}" class="flex-shrink-0 flex items-center">
                        <span class="text-lg sm:text-xl font-bold text-primary text-center sm:text-left">LABORATÓRIO DE TECNOLOGIA DA INFORMAÇÃO DO PROFÁGUA</span>
                    </a>
                </div>
                
                <div class="flex items-center justify-center sm:justify-end">
                    <div class="flex flex-wrap justify-center sm:ml-6 sm:space-x-4 space-x-2">
                        
                        <a href="{{ url_for('inventario') }}" class="text-black hover:bg-ltip-light-green/20 px-3 py-2 rounded-md text-sm font-medium transition duration-150 whitespace-nowrap">Inventário</a>
                        <a href="{{ url_for('inventario') }}?tab=maquinas" class="text-black hover:bg-ltip-light-blue/20 px-3 py-2 rounded-md text-sm font-medium transition duration-150 whitespace-nowrap">Máquinas</a>
                        
                        {% if current_user.is_authenticated %}
                            <a href="{{ url_for('gerenciamento') }}" class="text-white bg-ltip-dark-green hover:bg-ltip-dark-green/90 px-3 py-2 rounded-md text-sm font-medium transition duration-150 whitespace-nowrap">Gerenciar</a>
                            <a href="{{ url_for('gerenciamento') }}?tab=info" class="text-black hover:bg-ltip-light-blue/20 px-3 py-2 rounded-md text-sm font-medium transition duration-150 whitespace-nowrap">Editar Infos</a>
                            <a href="{{ url_for('logout') }}" class="text-white bg-red-600 hover:bg-red-700 px-3 py-2 rounded-md text-sm font-medium transition duration-150 whitespace-nowrap">Logout</a>
                        {% else %}
                            <a href="{{ url_for('login') }}" class="text-white bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-sm font-medium transition duration-150 whitespace-nowrap">Login</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </nav>
    
    <div class="main-content-wrapper max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="mt-8">
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="space-y-3">
                {% for category, message in messages %}
                    {% if category == 'success' %}
                        <div class="bg-ltip-light-green/50 border border-ltip-dark-green text-ltip-dark-green px-4 py-3 rounded-xl relative shadow-md" role="alert">
                            <span class="block sm:inline">{{ message }}</span>
                        </div>
                    {% elif category == 'error' %}
                        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-xl relative shadow-md" role="alert">
                            <span class="block sm:inline">{{ message }}</span>
                        </div>
                    {% else %}
                        <div class="bg-ltip-light-blue/50 border border-primary text-primary px-4 py-3 rounded-xl relative shadow-md" role="alert">
                            <span class="block sm:inline">{{ message }}</span>
                        </div>
                    {% endif %}
                {% endfor %}
                </div>
            {% endif %}
            {% endwith %}
        </div>
    
        <main class="py-6">
            {% block content %}{% endblock %}
        </main>
    
        <footer class="mt-12 py-4 border-t border-gray-200 text-center text-gray-500 text-sm">
            &copy; {{ datetime.now().year }} LTIP. Todos os direitos reservados. Criado por Arthur, o Bolsista.
        </footer>
    </div>
</body>
</html>
